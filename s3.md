# S3
- Objects up to 5 TB
- Universal namespace (all AWS accounts share the s3 namspace(bucket name))
- Global view access but they are placed in a specific region
- When uploading an object, it'll return 200 status code if sucessful
- S3 standard
    - 99.99% availability
    - 99.999999999% durability (11 9's)
- Tiered Sotrage
- Lifecicly management
- Versioning
- Server-side encryption
- ACL - Access Control List
    - Object level
- Bucket Policies
    - Applies to the entire bucket
- Strong Read-After-Write Consistency
    - Any GET affter a PUT will receive the latest version
- Unlimited Storage

---
- By default the bucket blocks public access (Block public access) (private)
- After allowing objects to be made public they can be accessed publicly
    - With ACL in case of object level
    - With bucket policy in case of entire bucket
---
- S3 has Automatic Scaling, so it might host a static website that will have high availability
- Need to create a bucket policy to make the bucket public
- Enable the static content option and define the index and error pages
---
Versioning objects
- Supports MFA
- Can be integrated with Lifecycle rules
- How could protect objects in S3? MFA to delete + versioning
    - Might work as a backup
- Old versions are private by default, in order to access them it's required to make the object public
- Versioning cannot be disabled, however can be suspended
---
Storage classes
- S3 Standard
    - \>= 3 AZ
    - 99.99% availability
    - 11 9's durability
    - Frequent access
- S3 Standard-Infrequent Access
    - Rapid Access
    - Pay for access (per GB)
    - 99.9% availability
    - 11 9's durability
- S3 One Zone-Infrequent Access
    - 20% cheaper then previous
    - 99.5% availability
    - 11 9's durability
- S3 Glacier
    - Pay for access
    - Use only for Archiving data (per GB)
    - Retrieving time from 1min to 12 hours
    - 99.99% availability
    - 11 9's durability
- S3 Glacier Deep Archive
    - Retrieving time of 12 hours
    - 99.99% availability
    - 11 9's durability
- S3 Inteligent Tiering
    - Use machine learning to move your objects between the best options
    - Small fee per 1k objects
---
Lifecycle management
- It's possible to combine lifecycle management with versioning and send only old versions to other tier
---
S3 Object Lock
- Write Once Read Many (WORM)
- Objects or bucket level
- Prevent deletion and modifications
- Governance Mode
    - Users can be granted with special permissions to alter or delete an object
- Compliance Mode
    - Guarantees an object cannot be deleted or overwritten by any users for the duration of the retention period
- Legal hold
    - Prevent an object from being deleted or overwritten
    - There's no retention period
    - Any user with PutObjectLegalHold permission can set or remove it
---
Glacier Vault Lock
- Same as S3 Object Lock but for Glacier
---
Encription
- Encription In Transit
    - SSL/TLS
    - HTTPS
- Encription at Rest - Server-side encription
    - SSE-S3 - S3-managed key (AES-256)
    - SSE-KMS - KMS managed key
    - SSE-C - Customer provided key
- Encription at Rest - Client side
    - Encripty the file before uploading  
Possible to enforce encription through:
- Console
- Bucket policy
    - Deny any PUT operation that doesn't contain "x-amz-server-side-encription" header.
---
S3 Performance
- We can improve the performance segregating our objects in different prefixes (folders)
    - your application can achieve at least 3,500 PUT/COPY/POST/DELETE or 5,500 GET/HEAD requests per second per prefix in a bucket.
- KMS encription is not scalable
    - it's region specific
    - it'll be either 5.5k, 10k or 30k requests per second
    - Uploading and downloading will count toward the KMS quota 
    - Currently cannot request quota increase
- Possible to mult part upload
    - Required for files bigger than 5GB
- S3 byte-range Fetches
---
S3 Replication
- Used to replicate across regions
- Versioning must be enabled
- Check if S3 batch replication will be in the exam
- Delete markers are not replicated by default
- Objects in a existing bucket are not replicated automatically when enable replication (But possible to replicate when creating the rule)